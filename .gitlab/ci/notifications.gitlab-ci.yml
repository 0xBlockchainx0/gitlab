.notify:
  image: alpine
  stage: notification
  dependencies: []
  cache: {}
  before_script:
    - apk update && apk add git curl bash

schedule:package-and-qa:notify-success:
  extends:
    - .only-canonical-schedules
    - .notify
  stage: notification
  script:
    - scripts/notify-slack qa-master "üéâ Scheduled QA against `master` passed! üéâ See $CI_PIPELINE_URL." ci_passing
  needs: ["schedule:package-and-qa"]
  when: on_success

schedule:package-and-qa:notify-failure:
  extends:
    - .only-canonical-schedules
    - .notify
  stage: notification
  script:
    - scripts/notify-slack qa-master "‚ò†Ô∏è Scheduled QA against `master` failed! ‚ò†Ô∏è See $CI_PIPELINE_URL." ci_failing
  needs: ["schedule:package-and-qa"]
  when: on_failure
